define(["view/popup","util/language-message"],function(a,b){var c="selected";return a.extend({options:{className:"pop-select-quest-branch",flagBtnCancel:1,flagBtnOk:1},events:{"tap .pop-select-quest-branch .btn-select-quest:not(.disabled)":"tapSelect","tap .pop-select-quest-branch .btn-usual-ok":"tapOk"},callbackOkButton:function(){},initialize:function(c,d){this.callbackOkButton=d,this.options.title=b.getMessage("archive_10"),this.options.body=_.template($("#tpl-pop-select-quest-branch").html(),{leadText:b.getMessage("select_quest_branch_lead",c.length),questList:c}),a.prototype.initialize.call(this)},tapSelect:function(a){$(a.currentTarget).toggleClass(c)},tapOk:function(){var a=this.serializeSelectedData();this.callbackOkButton(a)},serializeSelectedData:function(){var a=this.$el.find(".btn-select-quest");if(0===a.length)return"";var b=[];return _.each(a,function(a){var d=$(a);if(d.hasClass(c)){var e=d.data("questId");b.push(e)}}),b.join(",")}})});