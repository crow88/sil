define(["jquery","underscore"],function(a,b){function c(a,c,d){var e=window.mobage.shellapp[a]||{},f=null;if(b.isArray(c)){f=e;for(var g=0,h=c.length;h>g;g+=1)f=f[c[g]]}else f=e[c];var i=d||[];return b.isFunction(f)?f.apply(f,i):void 0}var d=window.mobage&&window.mobage.shellapp&&window.mobage.shellapp.Analytics&&window.mobage.shellapp.Analytics.Adjust||{},e={};e=b.isEmpty(window.mobage)?function(a,d,e){return b.isEmpty(window.mobage)?void 0:c(a,d,e)}:function(a,b,d){return c(a,b,d)};var f=function(){this.uid=b.uniqueId("uid")};return b.extend(f.prototype,{Defined:{OsName:{IOS:"iOS"},StoreUrl:{IOS:"https://itunes.apple.com/jp/app/guranburufantaji/id852882903?mt=8&uo=4",ANDROID:"https://play.google.com/store/apps/details?id=jp.mbga.a12016007.lite"},DocType:{CONTACT:function(){return b.isEmpty(window.mobage)?null:window.mobage.shellapp.Service.DocType.CONTACT},LEGAL:function(){return b.isEmpty(window.mobage)?null:window.mobage.shellapp.Service.DocType.LEGAL}},Callbacks:{NAMESPACE:"window.mobage.shellapp.Callbacks."}},isShellApp:function(){return window.mobage&&window.mobage.shellapp&&window.mobage.shellapp.App?!0:!1},isShellAppIOS:function(){return this.isShellApp()&&Game.ua.os.name==this.Defined.OsName.IOS?!0:!1},isShellAppAndroid:function(){return this.isShellApp()&&!this.isShellAppIOS()},isShellAppWKWebView:function(){var a=window.Game.ua;return this.isShellAppIOS()&&a.versionCompare(a.os.version,"8.0")>=0},getUpdateUrl:function(){return this.isShellApp()?this.isShellAppIOS()?this.Defined.StoreUrl.IOS:this.Defined.StoreUrl.ANDROID:""},setOnShellAppReady:function(a){document.addEventListener("onShellAppReady",a)},openBrowser:function(a){return e("Device","openURLWithBrowser",[a])},getVersionName:function(){return e("App","getVersionName")},getVersionCode:function(){return e("App","getVersionCode")},openDocument:function(a){return e("Service","openDocument",[a])},openUserProfile:function(a){return e("Service","openUserProfile",[a])},logoutDialog:function(){return e("Service","showLogoutDialog")},showCommunityUI:function(){return e("Service","showCommunityUI")},getRemoteNotification:function(){return e("RemoteNotification","getPayload")},playMusic:function(a,b,c){b=b||0,c=c||0;var d=a.replace(/\//g,"_").toLowerCase().replace(/_all(?!\w)/g,"_00").replace(/\.mp3$/,"");return e("Music","play",[d,b,c])},pauseMusic:function(a){return a=a||1,e("Music","pause",[a])},resumeMusic:function(a){return a=a||1,e("Music","resume",[a])},stopMusic:function(a){return a=a||0,e("Music","stop",[a])},playSoundEffect:function(a){var b=a.replace(/\//g,"_").toLowerCase().replace(/\.mp3$/,"");return e("SoundEffect","play",[b])},loadVoice:function(a){var b=a.replace(/\//g,"_").toLowerCase().replace(/\.mp3$/,"");return e("Voice","load",[b])},playVoice:function(a,b){var c=a.replace(/\//g,"_").toLowerCase().replace(/\.mp3$/,"");return e("Voice","play",[c,!!b])},pauseVoice:function(){return e("Voice","pause")},resumeVoice:function(){return e("Voice","resume")},stopVoice:function(){return e("Voice","stop")},setMute:function(a){return a=0|(a?1:0),e("Sound","setMute",[a])},setMusicMute:function(a){return a=0|(a?1:0),e("Sound","setMusicMute",[a])},setSEMute:function(a){return a=0|(a?1:0),e("Sound","setSEMute",[a])},setVoiceMute:function(a){return a=0|(a?1:0),e("Sound","setVoiceMute",[a])},setMusicVolume:function(a){return e("Sound","setMusicVolume",[+a])},setSEVolume:function(a){return e("Sound","setSEVolume",[+a])},setVoiceVolume:function(a){return e("Sound","setVoiceVolume",[+a])},setLocalNotification:function(a){if(window.gbfLocalPushNotification){var b=JSON.stringify(a);return e("Notification","sendAlert",[b])}},pseudoLocalStorage:function(a){return e("PseudoLocalStorage","exec",[a])},sendAdjustId:function(a){return d.setGameId?e("Analytics",["Adjust","setGameId"],[a]):void 0},sendAdjustEvent:function(a){return d.sendEvent?e("Analytics",["Adjust","sendEvent"],[a]):void 0},sendAdjustRevenueEvent:function(a,b,c,f){return b=+b,c=0|c,f=f||null,d.sendRevenueEvent?e("Analytics",["Adjust","sendRevenueEvent"],[a,b,c,f]):void 0},hideBackground:function(){return e("Footer","hideBackground")},forceLogout:function(){return e("Service","forceLogout")}}),function(b){function c(b,c,d){var e=window.mobage.shellapp,f=new a.Deferred;b+="_";var g=b+c+"_success",h=b+c+"_error",i=JSON.stringify({command:b+"plocalstorage",key:c,value:d,callback_ok:this.Defined.Callbacks.NAMESPACE+g,callback_ng:this.Defined.Callbacks.NAMESPACE+h});return e.Callbacks||(e.Callbacks={}),e.Callbacks[g]=function(a){f.resolve(a)},e.Callbacks[h]=function(a){f.reject(a)},this.pseudoLocalStorage(i),f.promise()}b.getPseudoLocalStorage=function(a){return c.call(this,"get",a)},b.setPseudoLocalStorage=function(a,b){return c.call(this,"set",a,b)}}(f.prototype),new f});